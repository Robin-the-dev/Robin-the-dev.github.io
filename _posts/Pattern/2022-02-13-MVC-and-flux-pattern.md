---
layout: post
title: MVC 패턴과 Flux 패턴
subtitle: Pattern Reference
categories: Pattern 
tags: [Pattern, MVC, Flux]
---

패턴에 대하여
------------

이번 포스트에서는 패턴에 대해서 얘기해보려고 한다. 사실 이번주에 Redux를 학습하였기 때문에 관련이있지만 패턴이라는 것에 대해서

학습을 진행한것은 아니여서 관련된 내용을 포스팅 해볼까 말까 고민했지만 관련 내용을 검색해보니 웹 개발을 한다면 꼭 알아야하는 

내용이라고 판단이되어 이렇게 정리를 해본다.

그리고 패턴이라는 내용에 대해 React 카테고리에 넣을까 고민 했지만 사실 프로그래밍이 있어 여기서 언급할 패턴 말고도 다양한 패턴이 있다는 것을 알고 있기에

카테고리를 따로 만들어보았다.

그러면 밑에서 MVC와 Flux에 대해서 알아보겠다.

### MVC ###

먼저 MVC 패턴에 대해서 얘기 해보겠다.

MVC 패턴은 대학 재학 중에 iOS Programming 이라는 과목을 통해서 접하게 되었다. 해당 과목은 Swift를 이용해서 xcode IDE를 사용해서

iOS 어플리케이션을 만들어보는 과목이었다. 이렇게 앱을 처음 단계에서 디자인을 구상할때 MVC라는 패턴을 이용한다고 배웠다.

일단 MVC는 Model, View, Controller라는 뜻으로 데이터를 담고 있는 Model, 유저에게 보여줄수있는 View, 그리고 유저가 interact 하여 데이터를 조작할 수 있는 Controller가 있다.

정리를 해보자면 유저가 View에 있는 Controller를 이용해서 웹이나 앱과 interact하여 데이터를 조작하고 Model에서 변경된 데이터를 저장하고 그 데이터를 View에 다시 보내어 화면을 렌더링하는 식이다.

문제는 MVC 패턴은 **양방향**으로도 동작이 가능하다는 점이다.

예를 들어 유저가 Controller를 통해 특정 Model의 데이터를 조작을 했는데 또 다른 Model의 데이터가 핸들된 데이터에 의존하고 있다면

또 다른 Model의 데이터도 변경을 해주어야하고 웹이나 앱이 점점 더 커지면 이러한 혼란이 더욱 커지게된다.

또한 이러한 데이터의 변경이 비동기적으로 생길 수 도 있기때문에 디버그하는 과정이 개발자 입장에서는 너무 고통스럽다.

Facebook에서는 이 같은 문제를 해결하기 위해 새로운 패턴을 고안해냈고 그 패턴이 바로 Flux 이다!

그럼 아래에서 Flux에 대해서 알아보자!

### Flux ###

Flux 라는 패턴이 가지는 MVC 패턴과의 큰 차이점은 바로 단방향 데이터 흐름 (Unidirectional data flow)이다.

Flux는 MVC와 다르게 데이터가 한쪽으로만 흐르고 새로운 데이터 변경이 있으면 그 데이터에 대하여 처음부터 다시 흐름이 시작된다.

부트캠프에서 일찍이 React를 배웠고 React 또한 단방향으로 데이터가 흐르는 것을 알고 있기 때문에 Flux가 어떤식으로 동작하는지는

쉽게 알 수 있을것이라 생각이된다.

일단 Flux 패턴이라는 시스템을 잘게 나눠 무엇이 있는지 한번 알아보자!

1. Action Creator (액션 생성자)
2. Dispatcher (디스패쳐)
3. Store (스토어)
4. Controller view and View (컨트롤러 뷰와 뷰)

위에 적은것처럼 Flux 패턴은 네가지로 이루어져있다.

#### Action Creator ####

액션 생성자는 액션이라는 객체를 만들어주는 함수이다. 액션 객체는 type이라는 키를 무조건 가져야하고 나머지 키들은 개발자가 원하는대로

정할 수 있지만 보통 payload라는 키를 가진다.

액션 객체의 type은 시스템에 정의 된 상수값을 말한다. 예를 들어 `'INCREMENT_COUNT', 'DECREMENT_COUNT'` 같은 것이 될 수 있다.

그래서 액션 생성자 함수는 이러한 액션 객체를 반환해주는 함수이다.

#### Dispatcher ####

디스패쳐는 Callback이 등록되어 있는 곳이다. 디스패쳐는 액션을 보내야 하는 모든 Store를 가지고 있고 액션 생성자로 부터 생성된

액션 객체를 디스패쳐가 받아 여러 스토어에 액션을 보내는 식이다.

이러한 처리는 동기적으로 실행되기 때문에 여러 액션이 한번에 들어와도 처리하는데 용이하다.

MVC와 같이 Store들 사이에 의존성을 가진 스토어가 있어도 차례차례 적절히 처리하는 것이 가능하다.

#### Store ####

스토어는 웹이나 앱에 존재하는 모든 상태와 관련된 로직을 보관하고 있는 곳이다. 그렇기에 모든 **상태 변경은 반드시 스토어에 의해서만 결정** 되어야하고 상태를 변경하기위해서 스토어에 직접 요청을 보낼 수 는 없다.

스토어에는 Setter 함수같은 것이 존재하지 않기 때문에 상태를 변경하기 위해서는 항상 정해진 절차를 따라야한다. (즉, 항상 액션 생성자를 통해 액션을 만들어 디스패쳐를 통해 변경해야한다.)

#### Controller view and View ####

스토어의 상태를 변경이 완료되면 변경이 되었다는 Change event (변경 이벤트)를 컨트롤러 뷰에게 알려주게된다.

컨트롤러 뷰는 뷰와 스토어의 중간자 역할으로 변경 이벤트를 받았다면 컨트롤러 뷰가 뷰에게 알려주어

뷰가 유저에게 화면을 렌더링 해주는 식이다.

여기서 중요한 포인트는 컨트롤러 뷰와 뷰는 내부 로직에 대해서는 아무것도 알 수 없고 단순히 받은 상태에 대하여

유저에게 보여주기만 한다.

### 마치며 ###

이렇게 MVC와 Flux에 대해 알아보았다. Redux를 통해 그냥 Flux 패턴이 이렇구나 하며 수박 겉핥기 식으로만 알고 있었는데

이번 기회에 MVC와 Flux를 비교해보며 제대로 알게 되었다.

프로그래밍관 관련한 다른 패턴이 또 있다면 다시 한번 정리를 해보겠다.

[Reference 01](https://bestalign.github.io/translation/cartoon-guide-to-flux/), 
[Reference 02](https://www.huskyhoochu.com/flux-architecture/)
